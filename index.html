<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>discord.exe</title>

<style>
:root{
  --text:#f2f6ff;
  --muted:#a8b3c7;

  --blue:#4aa3ff;
  --purple:#a78bfa;

  --green:#22c55e;
  --amber:#f59e0b;
  --red:#ef4444;
  --gray:#64748b;

  --radius:12px;
  --shadow: 0 28px 110px rgba(0,0,0,.78);

  --taskbarH: 54px;
}

*{box-sizing:border-box}
html,body{height:100%}

/* Lock select */
html, body{
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}
*{
  -webkit-user-select: none;
  user-select: none;
}
input, textarea{
  -webkit-user-select: auto;
  user-select: auto;
}

body{
  margin:0;
  font-family:"Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
  color:var(--text);
  background:#05060a;
  overflow:hidden;
}

/* ===== Background ===== */
.bg{ position:fixed; inset:0; z-index:-3; overflow:hidden; }
.bg iframe{
  position:absolute; top:50%; left:50%;
  width:160vw; height:90vw;
  min-width:160vh; min-height:90vh;
  transform:translate(-50%,-50%);
  filter: blur(6px);
  opacity:.48;
  pointer-events:none;
}
.bgOverlay{
  position:fixed; inset:0; z-index:-2;
  background:
    radial-gradient(900px 520px at 15% 18%, rgba(74,163,255,.11), transparent 60%),
    radial-gradient(820px 640px at 86% 25%, rgba(167,139,250,.11), transparent 60%),
    linear-gradient(180deg, rgba(10,12,18,.55), rgba(5,6,10,.78));
}
.noise{
  pointer-events:none;
  position:fixed; inset:0; z-index:-1;
  opacity:.05;
  mix-blend-mode: overlay;
}

.stage{ position:fixed; inset:0; padding-bottom:var(--taskbarH); }

.dragWrap{
  position:absolute;
  left:50%; top:50%;
  transform: translate(-50%,-50%);
  width:min(880px, calc(100% - 28px));
}

.window{
  border-radius:var(--radius);
  overflow:hidden;
  border:1px solid rgba(255,255,255,.13);
  background: linear-gradient(180deg, rgba(18,20,28,.72), rgba(18,20,28,.42));
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: var(--shadow);

  transform: translateY(10px);
  opacity:0;
  pointer-events:none;
  transition: opacity .28s ease, transform .28s ease;
}
body.entered .window{
  opacity:1;
  transform: translateY(0);
  pointer-events:auto;
}
body.minimized .window,
body.closed .window{
  opacity:0;
  pointer-events:none;
  transform: translateY(16px);
}

/* ===== Titlebar ===== */
.titlebar{
  height:42px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 10px 0 12px;
  background:rgba(255,255,255,.05);
  border-bottom:1px solid rgba(255,255,255,.085);
  gap:10px;
  cursor:grab;
}
.titlebar:active{cursor:grabbing}

.title{
  display:flex;
  align-items:center;
  gap:8px;
  font-size:13px;
  font-weight:750;
}

.appIcon{
  width:14px;height:14px;border-radius:4px;
  background:linear-gradient(135deg,var(--blue),var(--purple));
}

.winbtns{display:flex;}
.winbtn{
  width:46px;
  height:42px;
  display:grid;
  place-items:center;
  border-left:1px solid rgba(255,255,255,.06);
  cursor:pointer;
}
.winbtn:hover{background:rgba(255,255,255,.08)}
.winbtn.close:hover{background:rgba(239,68,68,.26)}

.content{ padding:18px 18px 16px; }

.subGrid{
  display:grid;
  grid-template-columns: 1.35fr 1fr;
  gap:12px;
  margin-top:10px;
}
@media (max-width: 740px){
  .subGrid{grid-template-columns:1fr}
}

.card{
  border:1px solid rgba(255,255,255,.10);
  background:rgba(255,255,255,.035);
  border-radius:14px;
  padding:12px;
}

/* Hide class for activity */
.hidden{
  display:none !important;
}

.footer{
  padding:10px 15px;
  font-size:11px;
  border-top:1px solid rgba(255,255,255,.08);
  display:flex; justify-content:space-between;
  background:rgba(255,255,255,.03);
}

audio{display:none}
</style>
</head>

<body>

<div class="subGrid">
  <div class="card">
    <div class="cardTitle">
      <h3>Custom status</h3>
    </div>
    <div id="customStatus">—</div>
  </div>

  <div class="card" id="activityCard">
    <div class="cardTitle">
      <h3>Activity</h3>
      <div id="activityType">—</div>
    </div>
    <div id="activityName">—</div>
    <div id="activityDetails">—</div>
  </div>
</div>

<script>
const USER_ID = "1377987625129869373";
const $ = (id) => document.getElementById(id);

function pickMainActivity(activities){
  if(!Array.isArray(activities)) return null;
  const filtered = activities.filter(a => a && a.name && a.type !== 4 && a.name !== "Spotify");
  return filtered.find(a => a.type === 0) || filtered[0] || null;
}

function formatActivity(a){
  if(!a) return null;
  const typeMap = {0:"Playing",1:"Streaming",2:"Listening",3:"Watching",5:"Competing"};
  return {
    type: typeMap[a.type] || "Activity",
    name: a.name || "—",
    details: [a.details, a.state].filter(Boolean).join(" • ") || "—"
  };
}

async function loadDiscord(){
  try{
    const r = await fetch(`https://api.lanyard.rest/v1/users/${USER_ID}`, { cache:"no-store" });
    const j = await r.json();
    const d = j?.data;

    const mainA = pickMainActivity(d?.activities);
    const card = $("activityCard");

    if(!mainA){
      card.classList.add("hidden");
    } else {
      card.classList.remove("hidden");
      const f = formatActivity(mainA);
      $("activityType").textContent = f.type;
      $("activityName").textContent = f.name;
      $("activityDetails").textContent = f.details;
    }

  }catch{
    $("activityCard").classList.add("hidden");
  }
}

loadDiscord();
setInterval(loadDiscord, 15000);
</script>

</body>
</html>
