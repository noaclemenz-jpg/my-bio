<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>discord.exe</title>

<style>
  :root{
    --text:#f2f6ff;
    --muted:#a8b3c7;
    --stroke: rgba(255,255,255,.12);

    --blue:#4aa3ff;
    --purple:#a78bfa;

    --green:#22c55e;
    --amber:#f59e0b;
    --red:#ef4444;
    --gray:#64748b;

    --radius:12px;
    --shadow: 0 28px 110px rgba(0,0,0,.78);

    --taskbarH: 54px;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:"Segoe UI",system-ui,-apple-system,Roboto,Arial,sans-serif;
    color:var(--text);
    background:#05060a;
    overflow:hidden;
  }

  /* ===== Background ===== */
  .bg{ position:fixed; inset:0; z-index:-3; overflow:hidden; }
  .bg iframe{
    position:absolute; top:50%; left:50%;
    width:160vw; height:90vw;
    min-width:160vh; min-height:90vh;
    transform:translate(-50%,-50%);
    filter: blur(6px);
    opacity:.48;
    pointer-events:none;
  }
  .bgOverlay{
    position:fixed; inset:0; z-index:-2;
    background:
      radial-gradient(900px 520px at 15% 18%, rgba(74,163,255,.11), transparent 60%),
      radial-gradient(820px 640px at 86% 25%, rgba(167,139,250,.11), transparent 60%),
      linear-gradient(180deg, rgba(10,12,18,.55), rgba(5,6,10,.78));
  }
  .noise{
    pointer-events:none;
    position:fixed; inset:0; z-index:-1;
    background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.25'/%3E%3C/svg%3E");
    opacity:.05;
    mix-blend-mode: overlay;
  }

  .stage{ position:fixed; inset:0; padding-bottom:var(--taskbarH); }

  /* draggable container */
  .dragWrap{
    position:absolute;
    left:50%; top:50%;
    transform: translate(-50%,-50%);
    width:min(860px, calc(100% - 28px));
    touch-action:none;
  }

  /* ===== guns.lol-ish hover ===== */
  .tilt{
    width:100%;
    transform-style:preserve-3d;
    will-change:transform;
    transition:transform .14s ease;
    position:relative;
  }
  .tilt::before{
    content:"";
    position:absolute; inset:-2px;
    border-radius: calc(var(--radius) + 2px);
    background: radial-gradient(760px 380px at var(--mx,50%) var(--my,50%),
      rgba(74,163,255,.22),
      rgba(167,139,250,.12) 42%,
      transparent 64%);
    opacity:0;
    transition: opacity .14s ease;
    pointer-events:none;
    filter: blur(2px);
  }
  .tilt::after{
    content:"";
    position:absolute; inset:-1px;
    border-radius: calc(var(--radius) + 1px);
    background: linear-gradient(120deg,
      rgba(74,163,255,0),
      rgba(74,163,255,.22),
      rgba(167,139,250,.18),
      rgba(74,163,255,0));
    opacity:0;
    transition: opacity .14s ease;
    pointer-events:none;
    filter: blur(12px);
  }
  .tilt:hover::before,.tilt:hover::after{opacity:1}

  /* ===== Window ===== */
  .window{
    border-radius:var(--radius);
    overflow:hidden;
    border:1px solid rgba(255,255,255,.13);
    background: linear-gradient(180deg, rgba(18,20,28,.72), rgba(18,20,28,.42));
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow: var(--shadow);

    transform: translateY(10px);
    opacity:0;
    pointer-events:none;
    transition: opacity .35s ease, transform .35s ease;
  }
  body.entered .window{
    opacity:1;
    transform: translateY(0);
    pointer-events:auto;
  }

  /* minimized/closed -> hide window, keep taskbar */
  body.minimized .window,
  body.closed .window{
    opacity:0;
    pointer-events:none;
    transform: translateY(16px);
  }

  .titlebar{
    height:42px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:0 10px 0 12px;
    background:rgba(255,255,255,.05);
    border-bottom:1px solid rgba(255,255,255,.085);
    user-select:none;
    gap:10px;
    cursor:grab;
  }
  .titlebar:active{cursor:grabbing}

  .title{
    display:flex;
    align-items:center;
    gap:8px;
    font-size:13px;
    font-weight:650;
    color:rgba(242,246,255,.93);
    white-space:nowrap;
  }
  .icon{
    width:14px;height:14px;border-radius:4px;
    background:linear-gradient(135deg,var(--blue),var(--purple));
    flex:0 0 auto;
  }

  .winbtns{display:flex; flex:0 0 auto;}
  .winbtn{
    width:46px;
    height:42px;
    display:grid;
    place-items:center;
    border-left:1px solid rgba(255,255,255,.06);
    color:rgba(242,246,255,.86);
    cursor:pointer;
  }
  .winbtn:hover{background:rgba(255,255,255,.08)}
  .winbtn.close:hover{background:rgba(239,68,68,.26)}

  /* ===== Content ===== */
  .content{ padding:28px 24px 22px; text-align:center; }

  .pfpWrap{
    width:108px; height:108px;
    margin: 6px auto 12px;
    position:relative;
  }
  .pfp{
    width:108px; height:108px;
    border-radius:14px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,.16);
    background:rgba(255,255,255,.03);
  }
  .pfp img{width:100%;height:100%;object-fit:cover;display:block}

  .pfpStatus{
    position:absolute;
    right:-2px;
    bottom:-2px;
    width:18px;
    height:18px;
    border-radius:999px;
    background: #0b0d13;
    border:1px solid rgba(255,255,255,.10);
    box-shadow: 0 10px 30px rgba(0,0,0,.55);
    display:grid;
    place-items:center;
  }
  .pfpStatus .dot{
    width:10px; height:10px;
    border-radius:999px;
    background: var(--gray);
  }
  .dot.online{background:var(--green)}
  .dot.idle{background:var(--amber)}
  .dot.dnd{background:var(--red)}
  .dot.offline{background:var(--gray)}

  h1{ margin:0; font-size:24px; font-weight:950; letter-spacing:.2px; line-height:1.15; }
  .handle{ margin-top:6px; font-size:13px; color:var(--muted); font-weight:750; }
  .tagline{ margin-top:10px; font-size:14px; color:var(--muted); line-height:1.5; }

  .pills{
    display:flex; justify-content:center;
    gap:10px; margin-top:16px; flex-wrap:wrap;
  }
  .pill{
    padding:8px 12px;
    border-radius:999px;
    border:1px solid rgba(255,255,255,.10);
    background:rgba(255,255,255,.04);
    font-size:12.5px;
    color:rgba(168,179,199,.96);
    display:flex; gap:8px; align-items:center;
    position:relative; overflow:hidden;
    transition: transform .12s ease, border-color .12s ease, background .12s ease;
  }
  .pill::before{
    content:"";
    position:absolute; top:-40%; left:-70%;
    width:70%; height:200%;
    transform: rotate(18deg);
    background: linear-gradient(90deg, transparent, rgba(255,255,255,.18), transparent);
    opacity:0;
    transition: left .36s ease, opacity .16s ease;
    pointer-events:none;
  }
  .pill:hover{
    transform: translateY(-1px);
    border-color: rgba(74,163,255,.35);
    background: rgba(74,163,255,.06);
  }
  .pill:hover::before{opacity:1; left:120%}

  /* Icon links (TikTok/Discord/YouTube) */
  .iconLinks{
    display:flex;
    justify-content:center;
    gap:12px;
    margin-top:18px;
  }
  .iBtn{
    width:44px;
    height:44px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.12);
    background: rgba(255,255,255,.04);
    display:grid;
    place-items:center;
    cursor:pointer;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
    text-decoration:none;
    color: rgba(242,246,255,.92);
  }
  .iBtn:hover{
    transform: translateY(-2px);
    background: rgba(255,255,255,.07);
    border-color: rgba(255,255,255,.20);
  }
  .iBtn svg{ width:22px; height:22px; opacity:.92; }

  .footer{
    padding:10px 15px;
    font-size:11px;
    border-top:1px solid rgba(255,255,255,.08);
    display:flex; justify-content:space-between;
    color:var(--muted);
    background:rgba(255,255,255,.03);
  }
  .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}

  audio{display:none}

  /* click-to-enter */
  .gate{
    position:fixed; inset:0;
    display:grid; place-items:center;
    z-index:100;
    cursor:pointer;
    transition: opacity .35s ease;
    background: rgba(0,0,0,.18);
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }
  body.entered .gate{opacity:0; pointer-events:none;}
  .gateText{
    font-size:26px; font-weight:850;
    color: rgba(242,246,255,.95);
    text-shadow: 0 10px 30px rgba(0,0,0,.55);
    letter-spacing:.2px;
  }
  .gateText .dots{ opacity:.9; animation:dots 1.2s infinite; }
  @keyframes dots{ 0%,20%{opacity:.3} 50%{opacity:1} 100%{opacity:.3} }

  /* ===== Taskbar ===== */
  .taskbar{
    position:fixed;
    left:0; right:0; bottom:0;
    height:var(--taskbarH);
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:0 10px;
    z-index:90;

    border-top:1px solid rgba(255,255,255,.10);
    background: rgba(10,12,18,.55);
    backdrop-filter: blur(18px);
    -webkit-backdrop-filter: blur(18px);
    box-shadow: 0 -20px 70px rgba(0,0,0,.55);

    opacity:0;
    pointer-events:none;
    transition: opacity .35s ease;
  }
  body.entered .taskbar{opacity:1; pointer-events:auto;}

  .tbLeft,.tbRight{display:flex; align-items:center; gap:8px;}
  .tbCenter{flex:1; display:flex; justify-content:center; align-items:center; gap:8px;}

  .tbBtn{
    width:38px;height:38px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.04);
    display:grid;
    place-items:center;
    cursor:pointer;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
  }
  .tbBtn:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,.07);
    border-color: rgba(255,255,255,.18);
  }

  .startMark{
    width:16px;height:16px;
    display:grid;
    grid-template-columns:1fr 1fr;
    grid-template-rows:1fr 1fr;
    gap:2px;
  }
  .startMark span{
    background: rgba(242,246,255,.92);
    border-radius:2px;
    opacity:.92;
  }

  .appBtn{
    min-width:170px;
    height:38px;
    padding:0 12px;
    border-radius:10px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.04);
    display:flex;
    align-items:center;
    gap:10px;
    cursor:pointer;
    transition: transform .12s ease, background .12s ease, border-color .12s ease;
  }
  .appBtn:hover{
    transform: translateY(-1px);
    background: rgba(255,255,255,.07);
    border-color: rgba(255,255,255,.18);
  }
  .appDot{
    width:14px;height:14px;border-radius:4px;
    background: linear-gradient(135deg,var(--blue),var(--purple));
  }
  .appName{ font-size:12.5px; font-weight:900; color: rgba(242,246,255,.92); white-space:nowrap; }
  .appIndicator{
    margin-left:auto;
    width:26px; height:4px;
    border-radius:999px;
    background: rgba(255,255,255,.14);
    position:relative;
    overflow:hidden;
  }
  .appIndicator::after{
    content:"";
    position:absolute; inset:0;
    background: rgba(74,163,255,.65);
    opacity:.95;
  }
  body.minimized .appIndicator::after,
  body.closed .appIndicator::after{opacity:.30}

  .tray{
    display:flex;
    align-items:center;
    gap:10px;
    padding:6px 10px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.03);
  }

  .volBtn{
    width:28px; height:28px;
    border-radius:10px;
    display:grid;
    place-items:center;
    border:1px solid rgba(255,255,255,.10);
    background: rgba(255,255,255,.04);
    cursor:pointer;
  }
  .volBtn:hover{ background: rgba(255,255,255,.07); }
  .volBtn svg{ width:16px; height:16px; opacity:.92; }

  .volRange{ width:160px; height:18px; display:flex; align-items:center; }
  input[type="range"]{
    -webkit-appearance:none;
    appearance:none;
    width:100%;
    height:4px;
    border-radius:999px;
    background: rgba(255,255,255,.22);
    outline:none;
  }
  input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none;
    appearance:none;
    width:14px;height:14px;border-radius:999px;
    background: rgba(255,255,255,.92);
    border:1px solid rgba(0,0,0,.35);
    box-shadow: 0 8px 20px rgba(0,0,0,.45);
  }
  input[type="range"]::-moz-range-thumb{
    width:14px;height:14px;border-radius:999px;
    background: rgba(255,255,255,.92);
    border:1px solid rgba(0,0,0,.35);
  }
  input[type="range"]::-moz-range-track{
    height:4px;border-radius:999px;
    background: rgba(255,255,255,.22);
  }

  .clockBox{
    display:flex;
    flex-direction:column;
    align-items:flex-end;
    line-height:1.1;
    padding:0 2px;
    min-width:64px;
  }
  .clockTime{ font-size:12.5px; font-weight:950; color: rgba(242,246,255,.92); }
  .clockDate{ margin-top:2px; font-size:11px; color: rgba(168,179,199,.92); font-weight:750; }

  @media (max-width: 820px){
    .volRange{width:120px}
    .appBtn{min-width:150px}
  }
  @media (max-width: 560px){
    .volRange{width:90px}
    .appBtn{min-width:120px}
    .clockBox{min-width:58px}
  }
</style>
</head>

<body>
  <div class="bg" aria-hidden="true">
    <iframe
      src="https://www.youtube.com/embed/Ulm_Z646eBg?autoplay=1&mute=1&controls=0&rel=0&playsinline=1&loop=1&playlist=Ulm_Z646eBg&modestbranding=1&iv_load_policy=3&disablekb=1"
      title="background"
      frameborder="0"
      allow="autoplay; encrypted-media"
      referrerpolicy="strict-origin-when-cross-origin"></iframe>
  </div>
  <div class="bgOverlay" aria-hidden="true"></div>
  <div class="noise" aria-hidden="true"></div>

  <div class="gate" id="gate">
    <div class="gateText">click to enter<span class="dots">...</span></div>
  </div>

  <div class="stage">
    <div class="dragWrap" id="dragWrap">
      <div class="tilt" id="tilt">
        <section class="window" id="window">
          <div class="titlebar" id="titlebar">
            <div class="title"><div class="icon"></div> discord.exe</div>
            <div class="winbtns">
              <div class="winbtn" id="btnMin" title="Minimize">—</div>
              <div class="winbtn close" id="btnClose" title="Close">✕</div>
            </div>
          </div>

          <div class="content">
            <div class="pfpWrap">
              <div class="pfp"><img id="pfp" alt="pfp" src="https://cdn.discordapp.com/embed/avatars/0.png"></div>
              <div class="pfpStatus" title="status">
                <div class="dot offline" id="pfpDot"></div>
              </div>
            </div>

            <h1 id="name">loading…</h1>
            <div class="handle" id="handle">@discord</div>
            <div class="tagline" id="tagline">windows look • guns.lol hover • clean</div>

            <div class="pills">
              <div class="pill" title="Views">views <span class="mono" id="views">…</span></div>
              <div class="pill" title="Ping">ping <span class="mono" id="ping">…</span></div>
            </div>

            <!-- icon buttons -->
            <div class="iconLinks">
              <!-- EDIT YOUR LINKS HERE -->
              <a class="iBtn" href="https://www.tiktok.com" target="_blank" rel="noreferrer" title="TikTok">
                <!-- TikTok icon (simple) -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M14 4v10.2a3.8 3.8 0 1 1-3-3.7V8.2a6 6 0 1 0 6 6V9.3c1 .8 2.2 1.3 3.5 1.4V8.1c-1.7-.2-3.1-1.4-3.8-3.1H14Z"
                        stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                </svg>
              </a>

              <a class="iBtn" href="https://discord.com" target="_blank" rel="noreferrer" title="Discord">
                <!-- Discord-ish icon -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M8.6 7.4c1-.5 2.2-.8 3.4-.8s2.4.3 3.4.8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
                  <path d="M7 8.8c-1 1.7-1.6 3.7-1.6 5.8 1.6 1.2 3.7 1.9 6.6 1.9s5-.7 6.6-1.9c0-2.1-.6-4.1-1.6-5.8-1.2-.7-2.5-1.2-4-1.4l-.6 1" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                  <path d="M10 13.2h.01M14 13.2h.01" stroke="currentColor" stroke-width="2.6" stroke-linecap="round"/>
                </svg>
              </a>

              <a class="iBtn" href="https://www.youtube.com" target="_blank" rel="noreferrer" title="YouTube">
                <!-- YouTube play icon -->
                <svg viewBox="0 0 24 24" fill="none">
                  <path d="M20 8.4a3 3 0 0 0-2.1-2.2C16.2 5.7 12 5.7 12 5.7s-4.2 0-5.9.5A3 3 0 0 0 4 8.4 31 31 0 0 0 3.7 12c0 1.2.1 2.4.3 3.6A3 3 0 0 0 6.1 18c1.7.5 5.9.5 5.9.5s4.2 0 5.9-.5A3 3 0 0 0 20 15.6c.2-1.2.3-2.4.3-3.6 0-1.2-.1-2.4-.3-3.6Z"
                        stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
                  <path d="M11 10.2 14.8 12 11 13.8v-3.6Z" fill="currentColor"/>
                </svg>
              </a>
            </div>
          </div>

          <div class="footer">
            <span>© <span id="year"></span></span>
            <span class="mono">vercel • lanyard • countapi</span>
          </div>
        </section>
      </div>
    </div>
  </div>

  <!-- TASKBAR -->
  <div class="taskbar" id="taskbar">
    <div class="tbLeft">
      <div class="tbBtn" title="Start">
        <div class="startMark" aria-hidden="true">
          <span></span><span></span><span></span><span></span>
        </div>
      </div>
    </div>

    <div class="tbCenter">
      <div class="appBtn" id="appToggle" title="discord.exe">
        <div class="appDot"></div>
        <div class="appName">discord.exe</div>
        <div class="appIndicator" aria-hidden="true"></div>
      </div>
    </div>

    <div class="tbRight">
      <div class="tray">
        <div class="volBtn" id="muteBtn" title="Volume">
          <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M11 5 7.5 8H4a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h3.5L11 19V5Z" stroke="currentColor" stroke-width="1.6" stroke-linejoin="round"/>
            <path id="wave1" d="M14.5 9.2c.6.7.9 1.7.9 2.8s-.3 2.1-.9 2.8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round"/>
            <path id="wave2" d="M16.8 7.2c1.1 1.2 1.7 2.9 1.7 4.8s-.6 3.6-1.7 4.8" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" opacity=".9"/>
          </svg>
        </div>

        <div class="volRange">
          <input id="vol" type="range" min="0" max="100" value="5" />
        </div>

        <div class="clockBox">
          <div class="clockTime mono" id="clock">--:--</div>
          <div class="clockDate mono" id="date">--.--</div>
        </div>
      </div>
    </div>
  </div>

  <!-- MP3 -->
  <audio id="bgMusic" loop preload="auto">
    <source src="/space-song-lyrics.mp3" type="audio/mpeg">
  </audio>

<script>
  const USER_ID = "1377987625129869373";
  const COUNT_NAMESPACE = "my-bio-khaki";
  const COUNT_KEY = "views";
  const $ = (id) => document.getElementById(id);

  // hover tilt
  const tilt = $("tilt");
  const maxTilt = 7;

  function setSpotlightVars(clientX, clientY){
    const r = tilt.getBoundingClientRect();
    const mx = ((clientX - r.left) / r.width) * 100;
    const my = ((clientY - r.top) / r.height) * 100;
    tilt.style.setProperty("--mx", mx + "%");
    tilt.style.setProperty("--my", my + "%");
  }

  tilt.addEventListener("mousemove", (e) => {
    const r = tilt.getBoundingClientRect();
    const px = (e.clientX - r.left) / r.width;
    const py = (e.clientY - r.top) / r.height;

    const ry = (px - 0.5) * (maxTilt * 2);
    const rx = (0.5 - py) * (maxTilt * 2);

    tilt.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg) translateY(-2px)`;
    setSpotlightVars(e.clientX, e.clientY);
  });

  tilt.addEventListener("mouseleave", () => {
    tilt.style.transform = `perspective(900px) rotateX(0deg) rotateY(0deg) translateY(0px)`;
    tilt.style.setProperty("--mx", "50%");
    tilt.style.setProperty("--my", "50%");
  });

  // clock + date
  function setClock(){
    const d = new Date();
    $("clock").textContent = String(d.getHours()).padStart(2,"0") + ":" + String(d.getMinutes()).padStart(2,"0");
    $("date").textContent = String(d.getDate()).padStart(2,"0") + "." + String(d.getMonth()+1).padStart(2,"0");
  }

  // views
  async function loadViews(){
    try{
      const r = await fetch(`https://api.countapi.xyz/hit/${encodeURIComponent(COUNT_NAMESPACE)}/${encodeURIComponent(COUNT_KEY)}`, { cache:"no-store" });
      const j = await r.json();
      $("views").textContent = (j.value ?? 0).toLocaleString();
    }catch{
      const k = "local_views_v1";
      const n = (Number(localStorage.getItem(k)||0) + 1);
      localStorage.setItem(k, String(n));
      $("views").textContent = n.toLocaleString();
    }
  }

  // discord
  function msPing(start){ return Math.max(0, Math.round(performance.now() - start)); }
  function setPfpStatusDot(status){
    const s = status || "offline";
    $("pfpDot").className = "dot " + s;
  }

  async function loadDiscord(){
    const t0 = performance.now();
    try{
      const r = await fetch(`https://api.lanyard.rest/v1/users/${USER_ID}`, { cache:"no-store" });
      $("ping").textContent = msPing(t0) + "ms";

      const j = await r.json();
      const d = j?.data;
      if(!d){
        $("name").textContent = "unknown";
        $("handle").textContent = "@discord";
        setPfpStatusDot("offline");
        return;
      }

      const u = d.discord_user || {};
      $("name").textContent = u.global_name || u.username || "user";
      $("handle").textContent = u.username ? `@${u.username}` : "@discord";

      if(u.id && u.avatar){
        const ext = u.avatar.startsWith("a_") ? "gif" : "png";
        $("pfp").src = `https://cdn.discordapp.com/avatars/${u.id}/${u.avatar}.${ext}?size=256`;
      }else{
        $("pfp").src = "https://cdn.discordapp.com/embed/avatars/0.png";
      }

      setPfpStatusDot(d.discord_status || "offline");
    }catch{
      setPfpStatusDot("offline");
    }
  }

  // audio + taskbar volume (default 5%)
  const audio = $("bgMusic");
  const vol = $("vol");
  const muteBtn = $("muteBtn");
  const wave1 = document.getElementById("wave1");
  const wave2 = document.getElementById("wave2");

  let lastVolume = 0.05;

  function applyVolume(v01){
    audio.volume = Math.max(0, Math.min(1, v01));
    const pct = Math.round(audio.volume * 100);
    vol.value = String(pct);

    const muted = audio.muted || pct === 0;
    wave1.style.opacity = muted ? "0" : "1";
    wave2.style.opacity = muted ? "0" : ".9";
  }

  vol.addEventListener("input", () => {
    const v = Number(vol.value) / 100;
    audio.muted = false;
    lastVolume = v || lastVolume;
    applyVolume(v);
  });

  muteBtn.addEventListener("click", () => {
    if(audio.muted || audio.volume === 0){
      audio.muted = false;
      applyVolume(lastVolume || 0.05);
    }else{
      lastVolume = audio.volume || lastVolume;
      audio.muted = true;
      applyVolume(audio.volume);
    }
  });

  applyVolume(0.05);

  // enter gate
  async function enter(){
    if(document.body.classList.contains("entered")) return;
    document.body.classList.add("entered");

    try{ await audio.play(); }catch(e){}

    loadViews();
    loadDiscord();
  }
  $("gate").addEventListener("click", enter);

  // minimize / close
  function minimize(){
    document.body.classList.add("minimized");
    document.body.classList.remove("closed");
  }
  function closeWindow(){
    document.body.classList.add("closed");
    document.body.classList.remove("minimized");
  }
  function restore(){
    document.body.classList.remove("minimized");
    document.body.classList.remove("closed");
  }
  function toggleFromTaskbar(){
    if(!document.body.classList.contains("entered")) return;
    if(document.body.classList.contains("minimized") || document.body.classList.contains("closed")){
      restore();
    }else{
      minimize();
    }
  }

  $("btnMin").addEventListener("click", minimize);
  $("btnClose").addEventListener("click", closeWindow);
  $("appToggle").addEventListener("click", toggleFromTaskbar);

  // draggable window
  const dragWrap = $("dragWrap");
  const titlebar = $("titlebar");

  let dragging=false, startX=0, startY=0, baseLeft=0, baseTop=0;
  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

  titlebar.addEventListener("pointerdown", (e) => {
    if(document.body.classList.contains("minimized") || document.body.classList.contains("closed")) return;
    dragging = true;
    titlebar.setPointerCapture(e.pointerId);

    const rect = dragWrap.getBoundingClientRect();
    startX = e.clientX; startY = e.clientY;

    dragWrap.style.left = rect.left + "px";
    dragWrap.style.top  = rect.top + "px";
    dragWrap.style.transform = "none";

    baseLeft = rect.left; baseTop = rect.top;
  });

  titlebar.addEventListener("pointermove", (e) => {
    if(!dragging) return;

    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    const winW = window.innerWidth;
    const winH = window.innerHeight - parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--taskbarH"));

    const rect = dragWrap.getBoundingClientRect();
    const w = rect.width;
    const h = rect.height;

    let nextLeft = baseLeft + dx;
    let nextTop  = baseTop + dy;

    const margin = 10;
    nextLeft = clamp(nextLeft, margin, winW - w - margin);
    nextTop  = clamp(nextTop, margin, winH - h - margin);

    dragWrap.style.left = nextLeft + "px";
    dragWrap.style.top  = nextTop + "px";
  });

  titlebar.addEventListener("pointerup", () => dragging=false);
  titlebar.addEventListener("pointercancel", () => dragging=false);

  // init
  $("year").textContent = new Date().getFullYear();
  setClock();
  setInterval(setClock, 10000);

  setInterval(() => {
    if(document.body.classList.contains("entered")) loadDiscord();
  }, 15000);
</script>
</body>
</html>
